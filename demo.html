<!DOCTYPE html>
<html>
<head>
    <title>Demo</title>
    <script src="dist/index.min.js"></script>
    <script src="./benchmarks data/medium/rawData.js"></script>
</head>
<style>
    #fromexportedpng, #download {
        display: none;
    }
</style>
<script>
"use strict"
window.addEventListener("load", () => {
    console.log("rawData", rawData)

    // const {minVal, maxVal} = PNGArrays.normalize(rawData)

    topng.addEventListener("click", () => {
        console.log(rawData)
        out.innerHTML = ""
        fromexportedpng.style.display = "inline-block"
        download.style.display = "inline-block"
        out.appendChild(PNGArrays.toPNG(rawData, {capacity: 1}))
    })

    frompng.addEventListener("click", () => {
        const data = PNGArrays.fromPNG(demoImg, {capacity: 1})
        console.log(data)
    })

    fromexportedpng.addEventListener("click", () => {
        const data = PNGArrays.fromPNG(out.querySelector("canvas"), {capacity: 1})
        // PNGArrays.unnormalize(data, minVal, maxVal)
        console.log(data)
    })

    download.addEventListener("click", () => {
        console.log("downloading image")

        const link = document.createElement("a")
        link.download = "image.png"

        out.querySelector("canvas").toBlob(blob => {
            link.href = URL.createObjectURL(blob)
            link.click()
        }, "image/png")
    })
})
</script>
<body>
    Make sure to serve this page using the included server, to avoid cross origin issues
    <img id="demoImg" src="fc.png">
    <button id="topng">To PNG</button>
    <button id="frompng">From above PNG</button>
    <button id="fromexportedpng">From converted PNG</button>
    <br><br>(Open the console)
    <div id="out"></div>
    <button id="download">Download</button>
</body>
</html>